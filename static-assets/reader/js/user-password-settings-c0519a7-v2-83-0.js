"use strict";(self.webpackChunkpartner_us_nsn_menominee_legislature=self.webpackChunkpartner_us_nsn_menominee_legislature||[]).push([[582],{3653(e,t,r){r.d(t,{A:()=>s});r(2956),r(5232),r(1192),r(6282),r(6110),r(9665),r(1097),r(3636),r(7202);const s=function(e,t){var r=[/.{8,}/g];null==t&&(t=r);var s=[];return(t||r).forEach(function(t){s.push(t.test(e))}),!s.some(function(e){return!1===e})}},3691(e,t,r){r.d(t,{A:()=>a});r(8494),r(8080);var s=r(5820);const a=function(e){var t=(0,s.A)({locale:"EN",no:1,one:null,two:null,few:null,many:null,other:null,zero:null},e);if(!e)throw new Error("Parameters are not defined");if(!t.locale)throw new Error('Parameter "locale" is required');if(!t.one)throw new Error('Parameter "one" is required');try{return t[new Intl.PluralRules(t.locale).select(t.no)]}catch(e){return console.error(e),t.one}}},7463(e,t,r){r.d(t,{A:()=>o});var s=function(){var e=this,t=e._self._c;return t("transition",{attrs:{name:"component-resize-y-fade",mode:"out-in"}},[e.errors.length>0?t("transition-group",{staticClass:"message-stack message-stack--error",attrs:{name:"component-resize-y-fade",tag:"ul"}},e._l(e.errors,function(r,s){return t("li",{key:"error-item-"+s},[r.msg?t("div",{staticClass:"error-msg"},[e._v("\n        "+e._s(r.msg)+"\n      ")]):e._e(),e._v(" "),t("div",{staticClass:"error-status"},[t("span",[t("b",[e._v(e._s(r.status))])]),e._v(" "),"statusText"in r&&""!==r.statusText?t("span",[t("b",[e._v(e._s(r.statusText))]),e._v("."),t("br"),e._v("\n          Please try again later or report this error.\n        ")]):e._e()])])}),0):e._e()],1)};s._withStripped=!0;r(868),r(7604),r(6282),r(5963),r(9665),r(1097),r(2930);var a=r(3691);const n={name:"ErrorStack",props:{errors:{type:Array,default:function(){return[]}}},computed:{language:function(){return this.$store.getters["localization/getLanguage"]},errorString:function(){var e=this.errors.map(function(e){return e.msg?e.msg.replace(/\.$/,""):e.statusText?e.statusText.replace(/\.$/,""):""}).join(", "),t=this.errors.length,r=(0,a.A)({no:t,locale:this.language,one:"Error",other:"Errors"});return e?r+": "+e+".":""}},watch:{errorString:function(e,t){e!==t&&this.$announcer.set(this.errorString)}}};const o=(0,r(8598).A)(n,s,[],!1,null,null,null).exports},9012(e,t,r){r.d(t,{A:()=>i});r(3772),r(3754),r(5968),r(4607);var s=function(){var e=this,t=e._self._c;return t("div",{class:["input-labeled-wrapper",e.classCustom],attrs:{id:e.cid}},[t("div",{class:["input-labeled","input-labeled--".concat(e.alignment),"input-labeled--".concat(e.type),e.disabledClass]},["checkbox"===e.inputType?t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"".concat(e.cid,"__input"),style:"paddingRight: calc(".concat(e.buttonsWidth,"px + 0.25rem)"),attrs:{id:"".concat(e.cid,"__input"),placeholder:" ",disabled:e.disabled,type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),t.stopPropagation(),e.onEnter(e.value))},click:function(e){e.preventDefault(),e.stopPropagation()},blur:function(t){return e.onBlur(e.value)},change:function(t){var r=e.value,s=t.target,a=!!s.checked;if(Array.isArray(r)){var n=e._i(r,null);s.checked?n<0&&(e.value=r.concat([null])):n>-1&&(e.value=r.slice(0,n).concat(r.slice(n+1)))}else e.value=a}}}):"radio"===e.inputType?t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"".concat(e.cid,"__input"),style:"paddingRight: calc(".concat(e.buttonsWidth,"px + 0.25rem)"),attrs:{id:"".concat(e.cid,"__input"),placeholder:" ",disabled:e.disabled,type:"radio"},domProps:{checked:e._q(e.value,null)},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),t.stopPropagation(),e.onEnter(e.value))},click:function(e){e.preventDefault(),e.stopPropagation()},blur:function(t){return e.onBlur(e.value)},change:function(t){e.value=null}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"".concat(e.cid,"__input"),style:"paddingRight: calc(".concat(e.buttonsWidth,"px + 0.25rem)"),attrs:{id:"".concat(e.cid,"__input"),placeholder:" ",disabled:e.disabled,type:e.inputType},domProps:{value:e.value},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),t.stopPropagation(),e.onEnter(e.value))},click:function(e){e.preventDefault(),e.stopPropagation()},blur:function(t){return e.onBlur(e.value)},input:function(t){t.target.composing||(e.value=t.target.value)}}}),e._v(" "),t("label",{attrs:{for:"".concat(e.cid,"__input")}},[e._v(e._s(e.label))])]),e._v(" "),e.buttonsAvailable?t("div",{ref:"inputButtonGroup"+e.cid,staticClass:"input-button-group"},[e.ifClearBtn?t("SuperButton",{attrs:{"button-text":"Reset field","button-type":"icon","icon-regular":"icon-x","class-regular":"button--transparent","class-selected":"button--transparent","class-custom":"button-clear-input",disabled:""===e.value},on:{"on-click":e.clearInput}}):e._e(),e._v(" "),"password"===e.type?t("SuperButton",{attrs:{"button-text":"Reveal password","button-type":"icon","icon-regular":"icon-eye-crossed","icon-selected":"icon-eye","class-regular":"button--transparent","class-selected":"button--transparent","class-custom":"button-reveal-password",disabled:e.disabled,selected:e.revealPass},on:{"on-click":function(t){e.revealPass=!e.revealPass}}}):e._e()],1):e._e()])};s._withStripped=!0;r(1192),r(9665);var a=r(8119);const n={name:"InputLabeled",components:{SuperButton:r(6919).A},mixins:[a.L],props:{uid:{type:String,default:null},type:{type:String,default:"text",validator:function(e){return["text","email","search","url","password"].some(function(t){return t===e})}},alignment:{type:String,default:"center",validator:function(e){return["left","center","right"].some(function(t){return t===e})}},clearBtn:{type:Boolean,default:!1},label:{type:String,default:"Input",required:!0},inputValue:{type:String,default:""},classCustom:{type:String,default:null},disabled:{type:Boolean,default:!1}},data:function(){return{revealPass:!1,value:"",buttonsWidth:0}},computed:{componentUID:function(){return null!==this.uid&&"input_".concat(this.uid)},inputType:function(){var e=this;return["text","email","search","url"].some(function(t){return t===e.type})?this.type:["password"].some(function(t){return t===e.type})?this.revealPass?"text":"password":"text"},disabledClass:function(){return!!this.$props.disabled&&"input-labeled--disabled"},buttonsAvailable:function(){return"password"===this.$props.type||this.$props.clearBtn},ifClearBtn:function(){return this.$props.clearBtn&&""!==this.value}},watch:{value:function(e){this.onAuto(e)},inputValue:function(e){this.value=e},ifClearBtn:function(){var e=this;this.$nextTick(function(){e.getButtonWrapWidth()})}},created:function(){this.value=this.$props.inputValue},mounted:function(){this.buttonsAvailable&&this.getButtonWrapWidth()},methods:{onEnter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$emit("on-enter",e)},onBlur:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$emit("on-blur",e)},onAuto:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$emit("on-auto",e)},clearInput:function(){this.value="",this.$refs["".concat(this.cid,"__input")].focus(),this.$emit("on-clear","")},getButtonWrapWidth:function(){this.buttonsWidth=Math.round(this.$refs["inputButtonGroup"+this.cid].getBoundingClientRect().width)},getAriaLabel:function(e){return{text:"Enter text",email:"Enter an email address",search:"Search",url:"Enter an URL",password:"Enter a password"}[e]||"Input field"}}},o=n;const i=(0,r(8598).A)(o,s,[],!1,null,null,null).exports},9767(e,t,r){r.r(t),r.d(t,{default:()=>g});var s=function(){var e=this,t=e._self._c;return t("section",{class:["area__tool__content","user-settings","user-settings-password"],attrs:{id:"grid-sidebar__content",role:"tabpanel",tabindex:"-1","aria-describedby":"grid-sidebar__header"}},[t("div",{staticClass:"h__ui--small"},[e._v("\n    Change password\n  ")]),e._v(" "),t("div",{staticClass:"label-group"},[t("InputLabeled",{attrs:{id:"currentPasswordForm",type:"password",label:"Current password",classCustom:"password-field-current",alignment:"left"},on:{"on-blur":e.validateCurrentPassword,"on-enter":e.validateCurrentPassword,"on-auto":e.d_handleCurrentPassword}}),e._v(" "),t("InputLabeled",{attrs:{id:"newPasswordForm",type:"password",label:"New password",classCustom:"password-field-new",alignment:"left",disabled:!e.currentPasswordValidated},on:{"on-blur":e.handleEnteredNewPassword,"on-enter":e.handleEnteredNewPassword,"on-auto":e.d_handleNewPassword}})],1),e._v(" "),t("SuperButton",{attrs:{"button-text":"Change password","class-regular":"button--ui",disabled:!e.changeEnabled||e.loading,loading:e.loading},on:{"on-click":e.d_doChangePassword}}),e._v(" "),e.passwordChanged?t("div",{staticClass:"message-stack message-stack--success"},[t("p",[e._v(e._s(e.successMessages.PASSWORD_CHANGED))])]):e._e(),e._v(" "),t("ErrorStack",{attrs:{errors:e.errors}})],1)};s._withStripped=!0;r(3772),r(6269),r(9665);var a=r(9217),n=r(9733),o=r.n(n),i=r(9724),u=r(1904),l=r(3653),c=r(9012),d=r(6919),p=r(369),h=r(890),m=r(7463);const v={name:i.A.TOOL_USER_PASSWORD,components:{SuperButton:d.A,ErrorStack:m.A,InputLabeled:c.A},mixins:[p.A,h.A],data:function(){return{currentPasswordValue:"",currentPasswordValidated:!1,newPasswordValue:"",newPasswordValidated:!1,loading:!1,passwordChanged:!1}},computed:{errors:function(){return this.$store.getters["errorStack/getStackedErrorsByNamespace"]("user-password")},changeEnabled:function(){return this.currentPasswordValidated&&this.newPasswordValidated},successMessages:function(){return u.bc}},created:function(){this.d_handleCurrentPassword=o()(this.validateCurrentPassword,1e3),this.d_handleNewPassword=o()(this.handleEnteredNewPassword,1e3),this.d_doChangePassword=o()(this.doChangePassword,1e3,{leading:!0})},methods:{validateCurrentPassword:function(e){this.currentPasswordValue=e,this.currentPasswordValidated=""!==this.currentPasswordValue},validateNewPassword:function(e){this.newPasswordValidated=(0,l.A)(e)},handleNewPasswordErrors:function(){""!==this.newPasswordValue&&this.newPasswordValidated?this.$store.commit("errorStack/removeStackedError",{namespace:"user-password",msg:u.y6.PASSWORD_NOT_VALID_LENGTH}):this.$store.commit("errorStack/addErrorToStack",{namespace:"user-password",msg:u.y6.PASSWORD_NOT_VALID_LENGTH})},handleEnteredNewPassword:function(e){this.newPasswordValue=e,this.validateNewPassword(this.newPasswordValue),this.handleNewPasswordErrors()},removePasswordErrors:function(){this.$store.commit("errorStack/removeStackedErrorsByNamespace","user-password")},activateConfirmationModal:function(){this.$store.commit("modal/clearModalDialogValues"),this.$store.commit("modal/setModalDialogValues",{headingText:u.bc.PASSWORD_CHANGED,contentHtml:u.bc.PASSWORD_CHANGED_MESSAGE,btnConfirmTxt:u.bc.OK,contentAlign:"center"}),this.$store.commit("modal/activateModalByName","ModalDialog")},doChangePassword:function(){var e=this;return this.changeEnabled?new Promise(function(t,r){e.loading=!0,a.A.post("".concat(e.$store.getters["user/getPortalURL"],"/users/set_password/"),{new_password:e.newPasswordValue,current_password:e.currentPasswordValue}).then(function(){e.loading=!1,e.removePasswordErrors(),e.passwordChanged=!0,e.$store.dispatch("user/logout"),e.activateConfirmationModal(),t()}).catch(function(s){if(e.loading=!1,e.passwordChanged=!1,s.response){var a=s.response.data;if(Object.hasOwn(a,"current_password"))e.removePasswordErrors(),e.$store.commit("sharedMessages/addPopupMessage",{type:"error",title:"User settings",text:u.y6.CURRENT_PASSWORD_INCORRECT,announce:u.y6.CURRENT_PASSWORD_INCORRECT}),e.$store.commit("errorStack/addErrorToStack",{namespace:"user-password",msg:u.y6.CURRENT_PASSWORD_INCORRECT}),t();else{e.removePasswordErrors();var n={status:s.response.status,statusText:s.response.data.message||s.response.data};e.$store.commit("sharedMessages/addPopupMessage",{type:"error",title:"User settings",text:"".concat(u.y6.SERVER_ERROR,": ").concat(n.status," ").concat(n.statusText),announce:"".concat(u.y6.SERVER_ERROR,": ").concat(n.status," ").concat(n.statusText)}),e.$store.commit("errorStack/addErrorToStack",{namespace:"user-password",msg:u.y6.SERVER_ERROR,status:n.status,statusText:n.statusText}),r(s)}}else{e.removePasswordErrors();var o={status:500,statusText:s.message||"Service unavailable"};e.$store.commit("sharedMessages/addPopupMessage",{type:"error",title:"User settings",text:"".concat(u.y6.SERVER_ERROR,": ").concat(o.status," ").concat(o.statusText),announce:"".concat(u.y6.SERVER_ERROR,": ").concat(o.status," ").concat(o.statusText)}),e.$store.commit("errorStack/addErrorToStack",{namespace:"user-password",msg:u.y6.SERVER_ERROR,status:o.status,statusText:o.statusText}),r(s)}})}):null}}};const g=(0,r(8598).A)(v,s,[],!1,null,null,null).exports}}]);
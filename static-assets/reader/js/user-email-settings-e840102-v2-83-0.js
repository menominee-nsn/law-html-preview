"use strict";(self.webpackChunkpartner_us_nsn_menominee_legislature=self.webpackChunkpartner_us_nsn_menominee_legislature||[]).push([[641],{1825(e,i,t){t.d(i,{Ay:()=>n});t(1097),t(3636);var a=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)};const n=a},7288(e,i,t){t.r(i),t.d(i,{default:()=>_});var a=function(){var e=this,i=e._self._c;return i("section",{class:["area__tool__content","user-settings","user-settings-email"],attrs:{id:"grid-sidebar__content",role:"tabpanel",tabindex:"-1","aria-describedby":"grid-sidebar__header"}},[i("div",{staticClass:"h__ui--small"},[e._v("\n    Current email\n  ")]),e._v(" "),""!==e.userEmail?i("div",{staticClass:"user-settings-email__verification"},[i("p",[e._v("\n      "+e._s(e.userEmail)+"\n\n      "),i("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.tip(e.verifiedText),expression:"tip(verifiedText)"}],class:["icon",e.icon(e.verifiedIcon),e.verifiedColor]})]),e._v(" "),e.emailVerified?e._e():i("div",{staticClass:"button-container"},[e.verificationEmailSent?e._e():i("SuperButton",{attrs:{"button-text":"Send verification email","class-regular":"button--ui",loading:e.loadingVerification,disabled:e.loadingVerification||e.limitEmailSending},on:{"on-click":e.sendVerificationEmail}})],1),e._v(" "),e.verificationEmailSent?i("div",{staticClass:"message-stack message-stack--success"},[i("p",[e._v(e._s(e.successMessages.VERIFICATION_EMAIL_SENT))])]):e._e()]):e._e()])};a._withStripped=!0;t(3772),t(9665),t(5636),t(5293);var n=t(9733),s=t.n(n),r=t(9724),o=t(1904),c=t(1825),l=t(8119),m=t(6919),u=t(369),d=t(890);const E={name:r.A.TOOL_USER_EMAIL,components:{SuperButton:m.A},mixins:[u.A,d.A,l.A],data:function(){return{loadingVerification:!1,limitEmailSending:!1,loadingEmail:!1,emailChangeRequested:!1,loadingEmailChange:!1,emailValue:"",emailValidated:!1}},computed:{successMessages:function(){return o.bc},userEmail:function(){return this.$store.getters["user/getUserData"].email},emailVerified:function(){return this.$store.getters["user/getEmailVerificationStatus"]},verificationEmailSent:function(){return this.$store.getters["user/getVerificationEmailSent"]},verifiedIcon:function(){return this.emailVerified?"icon-ok-o":"icon-exclamation-o"},verifiedText:function(){return this.emailVerified?"This email is verified":"This email is unverified"},verifiedColor:function(){return this.emailVerified?"icon--verified":"icon--unverified"},errorsEmailChange:function(){return this.$store.getters["errorStack/getStackedErrorsByNamespace"]("user-email-change")}},created:function(){this.d_validateEmail=s()(this.validateEmail,1e3)},methods:{validateEmail:function(e){e.length>0&&"string"==typeof e?this.emailValue=e.trim():this.emailValue="",this.emailValidated=(0,c.Ay)(this.emailValue),this.handleEmailErrors()},handleEmailErrors:function(){""!==this.emailValue?this.emailValidated?this.$store.commit("errorStack/removeStackedError",{namespace:"user-email-change",msg:o.y6.EMAIL_NOT_VALID}):this.$store.commit("errorStack/addErrorToStack",{namespace:"user-email-change",msg:o.y6.EMAIL_NOT_VALID}):this.$store.commit("errorStack/removeStackedError",{namespace:"user-email-change",msg:o.y6.EMAIL_NOT_VALID})},sendVerificationEmail:function(){var e=this;return new Promise(function(i){e.loadingVerification=!0,setTimeout(function(){e.$store.commit("user/setVerificationEmailSent"),e.$store.commit("sharedMessages/addPopupMessage",{type:"success",title:"User settings",text:"".concat(o.bc.VERIFICATION_EMAIL_SENT," ").concat(o.bc.VERIFICATION_EMAIL_SENT_DESC),announce:"".concat(o.bc.VERIFICATION_EMAIL_SENT," ").concat(o.bc.VERIFICATION_EMAIL_SENT_DESC),timeout:1e4}),e.loadingVerification=!1,i()},1e3)})},removeEmailChangeErrors:function(){this.$store.commit("errorStack/removeStackedError",{namespace:"user-email-change",msg:o.y6.SERVER_ERROR})},changeEmail:function(){var e=this;return new Promise(function(i){e.loadingEmailChange=!0,setTimeout(function(){e.removeEmailChangeErrors(),e.emailChangeRequested=!0,e.$store.commit("sharedMessages/addPopupMessage",{type:"success",title:"User settings",text:"".concat(o.bc.VERIFICATION_EMAIL_SENT," ").concat(o.bc.VERIFICATION_EMAIL_SENT_DESC),announce:"".concat(o.bc.VERIFICATION_EMAIL_SENT," ").concat(o.bc.VERIFICATION_EMAIL_SENT_DESC),timeout:1e4}),e.loadingEmailChange=!1,i()},2e3)})}}};const _=(0,t(8598).A)(E,a,[],!1,null,null,null).exports}}]);